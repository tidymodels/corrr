<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="corrr">
<title>Using corrr • corrr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.8/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.8/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using corrr">
<meta property="og:description" content="corrr">
<meta property="og:image" content="https://corrr.tidymodels.org/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="corrr.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">corrr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.4.4.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/databases.html">Using corrr with databases</a>
    <a class="dropdown-item" href="../articles/using-corrr.html">Using corrr</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tidymodels/corrr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using corrr</h1>
                        <h4 data-toc-skip class="author">Simon
Jackson</h4>
            
            <h4 data-toc-skip class="date">2024-01-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/corrr/blob/HEAD/vignettes/using-corrr.Rmd" class="external-link"><code>vignettes/using-corrr.Rmd</code></a></small>
      <div class="d-none name"><code>using-corrr.Rmd</code></div>
    </div>

    
    
<p>corrr is a package for exploring <strong>corr</strong>elations in
<strong>R</strong>. It makes it possible to easily perform routine tasks
when exploring correlation matrices such as ignoring the diagonal,
focusing on the correlations of certain variables against others, or
rearranging and visualizing the matrix in terms of the strength of the
correlations.</p>
<div class="section level2">
<h2 id="using-corrr">Using corrr<a class="anchor" aria-label="anchor" href="#using-corrr"></a>
</h2>
<p>Using <code>corrr</code> starts with <code><a href="../reference/correlate.html">correlate()</a></code>, which
acts like the base correlation function <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor()</a></code>. It differs
by defaulting to pairwise deletion, and returning a correlation data
frame (<code>cor_df</code>) of the following structure:</p>
<ul>
<li>A <code>tbl</code> with an additional class,
<code>cor_df</code>
</li>
<li>An extra “term” column</li>
<li>Standardized variances (the matrix diagonal) set to missing values
(<code>NA</code>) so they can be ignored.</li>
</ul>
<p>To work with further, let’s create a correlation data frame using
<code><a href="../reference/correlate.html">correlate()</a></code> from the <code>mtcars</code> data that comes
with R:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/corrr" class="external-link">corrr</a></span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/correlate.html">correlate</a></span><span class="op">(</span><span class="va">mtcars</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">d</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 12</span></span></span>
<span><span class="co">#&gt;    term     mpg    cyl   disp     hp    drat     wt    qsec     vs      am</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> mpg   <span style="color: #BB0000;">NA</span>     -<span style="color: #BB0000;">0.852</span> -<span style="color: #BB0000;">0.848</span> -<span style="color: #BB0000;">0.776</span>  0.681  -<span style="color: #BB0000;">0.868</span>  0.419   0.664  0.600 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> cyl   -<span style="color: #BB0000;">0.852</span> <span style="color: #BB0000;">NA</span>      0.902  0.832 -<span style="color: #BB0000;">0.700</span>   0.782 -<span style="color: #BB0000;">0.591</span>  -<span style="color: #BB0000;">0.811</span> -<span style="color: #BB0000;">0.523</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> disp  -<span style="color: #BB0000;">0.848</span>  0.902 <span style="color: #BB0000;">NA</span>      0.791 -<span style="color: #BB0000;">0.710</span>   0.888 -<span style="color: #BB0000;">0.434</span>  -<span style="color: #BB0000;">0.710</span> -<span style="color: #BB0000;">0.591</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> hp    -<span style="color: #BB0000;">0.776</span>  0.832  0.791 <span style="color: #BB0000;">NA</span>     -<span style="color: #BB0000;">0.449</span>   0.659 -<span style="color: #BB0000;">0.708</span>  -<span style="color: #BB0000;">0.723</span> -<span style="color: #BB0000;">0.243</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> drat   0.681 -<span style="color: #BB0000;">0.700</span> -<span style="color: #BB0000;">0.710</span> -<span style="color: #BB0000;">0.449</span> <span style="color: #BB0000;">NA</span>      -<span style="color: #BB0000;">0.712</span>  0.091<span style="text-decoration: underline;">2</span>  0.440  0.713 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> wt    -<span style="color: #BB0000;">0.868</span>  0.782  0.888  0.659 -<span style="color: #BB0000;">0.712</span>  <span style="color: #BB0000;">NA</span>     -<span style="color: #BB0000;">0.175</span>  -<span style="color: #BB0000;">0.555</span> -<span style="color: #BB0000;">0.692</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> qsec   0.419 -<span style="color: #BB0000;">0.591</span> -<span style="color: #BB0000;">0.434</span> -<span style="color: #BB0000;">0.708</span>  0.091<span style="text-decoration: underline;">2</span> -<span style="color: #BB0000;">0.175</span> <span style="color: #BB0000;">NA</span>       0.745 -<span style="color: #BB0000;">0.230</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> vs     0.664 -<span style="color: #BB0000;">0.811</span> -<span style="color: #BB0000;">0.710</span> -<span style="color: #BB0000;">0.723</span>  0.440  -<span style="color: #BB0000;">0.555</span>  0.745  <span style="color: #BB0000;">NA</span>      0.168 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> am     0.600 -<span style="color: #BB0000;">0.523</span> -<span style="color: #BB0000;">0.591</span> -<span style="color: #BB0000;">0.243</span>  0.713  -<span style="color: #BB0000;">0.692</span> -<span style="color: #BB0000;">0.230</span>   0.168 <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> gear   0.480 -<span style="color: #BB0000;">0.493</span> -<span style="color: #BB0000;">0.556</span> -<span style="color: #BB0000;">0.126</span>  0.700  -<span style="color: #BB0000;">0.583</span> -<span style="color: #BB0000;">0.213</span>   0.206  0.794 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> carb  -<span style="color: #BB0000;">0.551</span>  0.527  0.395  0.750 -<span style="color: #BB0000;">0.090</span><span style="color: #BB0000; text-decoration: underline;">8</span>  0.428 -<span style="color: #BB0000;">0.656</span>  -<span style="color: #BB0000;">0.570</span>  0.057<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: gear &lt;dbl&gt;, carb &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="why-a-correlation-data-frame">Why a correlation data frame?<a class="anchor" aria-label="anchor" href="#why-a-correlation-data-frame"></a>
</h2>
<p>At first, a correlation data frame might seem like an unnecessary
complexity compared to the traditional matrix. However, the purpose of
corrr is to help use explore these correlations, not to do mathematical
or statistical operations. Thus, by having the correlations in a data
frame, we can make use of packages that help us work with data frames
like <code>dplyr</code>, <code>tidyr</code>, <code>ggplot2</code>, and
focus on using data pipelines. Lets look at some examples:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter rows to occasions in which cyl has a correlation of .7 or more with</span></span>
<span><span class="co"># another variable.</span></span>
<span><span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cyl</span> <span class="op">&gt;</span> <span class="fl">.7</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 12</span></span></span>
<span><span class="co">#&gt;   term     mpg   cyl   disp     hp   drat     wt   qsec     vs     am</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> disp  -<span style="color: #BB0000;">0.848</span> 0.902 <span style="color: #BB0000;">NA</span>      0.791 -<span style="color: #BB0000;">0.710</span>  0.888 -<span style="color: #BB0000;">0.434</span> -<span style="color: #BB0000;">0.710</span> -<span style="color: #BB0000;">0.591</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> hp    -<span style="color: #BB0000;">0.776</span> 0.832  0.791 <span style="color: #BB0000;">NA</span>     -<span style="color: #BB0000;">0.449</span>  0.659 -<span style="color: #BB0000;">0.708</span> -<span style="color: #BB0000;">0.723</span> -<span style="color: #BB0000;">0.243</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> wt    -<span style="color: #BB0000;">0.868</span> 0.782  0.888  0.659 -<span style="color: #BB0000;">0.712</span> <span style="color: #BB0000;">NA</span>     -<span style="color: #BB0000;">0.175</span> -<span style="color: #BB0000;">0.555</span> -<span style="color: #BB0000;">0.692</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: gear &lt;dbl&gt;, carb &lt;dbl&gt;</span></span></span>
<span></span>
<span><span class="co"># Select the mpg, cyl and disp columns (and term)</span></span>
<span><span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">term</span>, <span class="va">mpg</span>, <span class="va">cyl</span>, <span class="va">disp</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 4</span></span></span>
<span><span class="co">#&gt;    term     mpg    cyl   disp</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> mpg   <span style="color: #BB0000;">NA</span>     -<span style="color: #BB0000;">0.852</span> -<span style="color: #BB0000;">0.848</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> cyl   -<span style="color: #BB0000;">0.852</span> <span style="color: #BB0000;">NA</span>      0.902</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> disp  -<span style="color: #BB0000;">0.848</span>  0.902 <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> hp    -<span style="color: #BB0000;">0.776</span>  0.832  0.791</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> drat   0.681 -<span style="color: #BB0000;">0.700</span> -<span style="color: #BB0000;">0.710</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> wt    -<span style="color: #BB0000;">0.868</span>  0.782  0.888</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> qsec   0.419 -<span style="color: #BB0000;">0.591</span> -<span style="color: #BB0000;">0.434</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> vs     0.664 -<span style="color: #BB0000;">0.811</span> -<span style="color: #BB0000;">0.710</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> am     0.600 -<span style="color: #BB0000;">0.523</span> -<span style="color: #BB0000;">0.591</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> gear   0.480 -<span style="color: #BB0000;">0.493</span> -<span style="color: #BB0000;">0.556</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> carb  -<span style="color: #BB0000;">0.551</span>  0.527  0.395</span></span>
<span></span>
<span><span class="co"># Combine above in a single pipeline</span></span>
<span><span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cyl</span> <span class="op">&gt;</span> <span class="fl">.7</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">term</span>, <span class="va">mpg</span>, <span class="va">cyl</span>, <span class="va">disp</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">#&gt;   term     mpg   cyl   disp</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> disp  -<span style="color: #BB0000;">0.848</span> 0.902 <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> hp    -<span style="color: #BB0000;">0.776</span> 0.832  0.791</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> wt    -<span style="color: #BB0000;">0.868</span> 0.782  0.888</span></span></code></pre></div>
<p>Furthermore, by having the diagonal set to missing, we don’t need to
put in extra effort to ignore them when summarizing the correlations.
For example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compute mean of each column</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">term</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dbl</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;           mpg           cyl          disp            hp          drat </span></span>
<span><span class="co">#&gt; -0.1050454113 -0.0925483176 -0.0872737071  0.0006800268 -0.0037165212 </span></span>
<span><span class="co">#&gt;            wt          qsec            vs            am          gear </span></span>
<span><span class="co">#&gt; -0.0828684293 -0.1752247305 -0.1145625942  0.0053087327  0.0484120552 </span></span>
<span><span class="co">#&gt;          carb </span></span>
<span><span class="co">#&gt;  0.0563419513</span></span></code></pre></div>
<div class="section level3">
<h3 id="api">API<a class="anchor" aria-label="anchor" href="#api"></a>
</h3>
<p>As the above section suggests, the corrr API is designed with data
pipelines in mind (e.g., to use <code>%&gt;%</code> from the magrittr
package). After <code><a href="../reference/correlate.html">correlate()</a></code>, the primary corrr functions
take a <code>cor_df</code> as their first argument, and return a
<code>cor_df</code> or <code>tbl</code> (or output like a plot). These
functions serve one of three purposes:</p>
<p>Internal changes (<code>cor_df</code> out):</p>
<ul>
<li>
<code><a href="../reference/shave.html">shave()</a></code> the upper or lower triangle (set to NA).</li>
<li>
<code><a href="../reference/rearrange.html">rearrange()</a></code> the columns and rows based on correlation
strengths.</li>
</ul>
<p>Reshape structure (<code>tbl</code> or <code>cor_df</code> out):</p>
<ul>
<li>
<code><a href="../reference/focus.html">focus()</a></code> on select columns and rows.</li>
<li>
<code><a href="../reference/stretch.html">stretch()</a></code> into a long format.</li>
</ul>
<p>Output/visualizations (console/plot out):</p>
<ul>
<li>
<code><a href="../reference/fashion.html">fashion()</a></code> the correlations for pretty printing.</li>
<li>
<code><a href="../reference/rplot.html">rplot()</a></code> a shape for each correlation.</li>
<li>
<code><a href="../reference/network_plot.html">network_plot()</a></code> a point for each variable, joined by
paths for correlations.</li>
</ul>
<p>By combing these functions in data pipelines, it’s possible to easily
explore your correlations.</p>
<p>For example, lets focus on the correlations of mpg and cyl with all
the others:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/focus.html">focus</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">cyl</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 3</span></span></span>
<span><span class="co">#&gt;   term     mpg    cyl</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> disp  -<span style="color: #BB0000;">0.848</span>  0.902</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> hp    -<span style="color: #BB0000;">0.776</span>  0.832</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> drat   0.681 -<span style="color: #BB0000;">0.700</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> wt    -<span style="color: #BB0000;">0.868</span>  0.782</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> qsec   0.419 -<span style="color: #BB0000;">0.591</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> vs     0.664 -<span style="color: #BB0000;">0.811</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> am     0.600 -<span style="color: #BB0000;">0.523</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> gear   0.480 -<span style="color: #BB0000;">0.493</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> carb  -<span style="color: #BB0000;">0.551</span>  0.527</span></span></code></pre></div>
<p>Or maybe we want to focus in on a few variables (mirrored in rows
too) and print the correlations without an upper triangle and fashioned
to look nice:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/focus.html">focus</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">:</span><span class="va">drat</span>, mirror <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  <span class="co"># Focus only on mpg:drat</span></span>
<span>  <span class="fu"><a href="../reference/shave.html">shave</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># Remove the upper triangle</span></span>
<span>  <span class="fu"><a href="../reference/fashion.html">fashion</a></span><span class="op">(</span><span class="op">)</span>   <span class="co"># Print in nice format </span></span>
<span><span class="co">#&gt;   term  mpg  cyl disp   hp drat</span></span>
<span><span class="co">#&gt; 1  mpg                         </span></span>
<span><span class="co">#&gt; 2  cyl -.85                    </span></span>
<span><span class="co">#&gt; 3 disp -.85  .90               </span></span>
<span><span class="co">#&gt; 4   hp -.78  .83  .79          </span></span>
<span><span class="co">#&gt; 5 drat  .68 -.70 -.71 -.45</span></span></code></pre></div>
<p>Alternatively, we can visualize these correlations (let’s clear the
lower triangle for a change):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/focus.html">focus</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">:</span><span class="va">drat</span>, mirror <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/shave.html">shave</a></span><span class="op">(</span>upper <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/rplot.html">rplot</a></span><span class="op">(</span><span class="op">)</span>     <span class="co"># Plot</span></span></code></pre></div>
<p><img src="using-corrr_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>Perhaps we’d like to rearrange the correlations so that the plot
becomes easier to interpret. In this case, we can add
<code><a href="../reference/rearrange.html">rearrange()</a></code> into our pipeline before shaving one of the
triangles (we’ll take correlation sign into account with
<code>absolute = FALSE</code>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/focus.html">focus</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">:</span><span class="va">drat</span>, mirror <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/rearrange.html">rearrange</a></span><span class="op">(</span>absolute <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/shave.html">shave</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/rplot.html">rplot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="using-corrr_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="other-resources">Other Resources<a class="anchor" aria-label="anchor" href="#other-resources"></a>
</h2>
<p>For other resources about how to use <code>corrr</code>, you’ll find
plenty of posts explaining functions at <a href="https://drsimonj.svbtle.com/" class="external-link">blogR</a>, or keep up to date with
these on Twitter by following <a href="https://twitter.com/drsimonj" class="external-link">@drsimonj</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, Simon Jackson, Jorge Cimentada.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer>
</body>
</html>
